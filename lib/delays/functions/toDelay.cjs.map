{"version":3,"file":"toDelay.cjs","sources":["../../../src/delays/functions/toDelay.ts"],"sourcesContent":["import type { EventsMap, PromiseeMap } from '#events';\nimport type { FnR } from '#types';\nimport { reduceFnMap } from '#utils';\nimport type { types } from '@bemedev/types';\nimport type { DelayMap } from '../types';\n\nexport type ToDelay_F = <\n  E extends EventsMap,\n  P extends PromiseeMap = PromiseeMap,\n  Pc extends types.PrimitiveObject = types.PrimitiveObject,\n  Tc extends types.PrimitiveObject = types.PrimitiveObject,\n>(\n  events: E,\n  promisees: P,\n  delay: string,\n  delays?: DelayMap<E, P, Pc, Tc>,\n) => FnR<E, P, Pc, Tc, number> | undefined;\n\n/**\n * Converts a delay configuration to a function that returns the delay in milliseconds.\n * If the delay is a number, it returns a function that returns that number.\n * If the delay is a function, it reduces the function map with the provided events and promisees.\n *\n * @param events of type {@linkcode EventsMap} [E], the events map to use for resolving the delay.\n * @param promisees of type {@linkcode PromiseeMap} [P], the promisees map to use for resolving the delay.\n * @param delay of type string,  The delay configuration.\n * @param delays of type {@linkcode DelayMap}, the map of delays containing functions to execute.\n * @returns a function that returns the delay in milliseconds or undefined if not found.\n *\n * @see {@linkcode types.PrimitiveObject}\n * @see {@linkcode reduceFnMap}\n */\nexport const toDelay: ToDelay_F = (events, promisees, delay, delays) => {\n  const fn = delays?.[delay];\n  const check = typeof fn === 'number';\n  if (check) return () => fn;\n\n  const func = fn ? reduceFnMap(events, promisees, fn) : undefined;\n  return func;\n};\n"],"names":["reduceFnMap"],"mappings":";;;;;;;;;;AAkBA;;;;;;;;;;;;;AAaG;AACI,MAAM,OAAO,GAAc,CAAC,MAAM,EAAE,SAAS,EAAE,KAAK,EAAE,MAAM,KAAI;AACrE,IAAA,MAAM,EAAE,GAAG,MAAM,GAAG,KAAK,CAAC;AAC1B,IAAA,MAAM,KAAK,GAAG,OAAO,EAAE,KAAK,QAAQ;AACpC,IAAA,IAAI,KAAK;AAAE,QAAA,OAAO,MAAM,EAAE;AAE1B,IAAA,MAAM,IAAI,GAAG,EAAE,GAAGA,6BAAW,CAAC,MAAM,EAAE,SAAS,EAAE,EAAE,CAAC,GAAG,SAAS;AAChE,IAAA,OAAO,IAAI;AACb;;;;"}