{"version":3,"file":"merge.js","sources":["../../src/utils/merge.ts"],"sourcesContent":["import { castings, type types } from '@bemedev/types';\nimport { deepmergeCustom } from 'deepmerge-ts';\nimport equal from 'fast-deep-equal';\n\ndeclare module 'deepmerge-ts' {\n  interface DeepMergeFunctionURItoKind<\n    Ts extends Readonly<ReadonlyArray<unknown>>,\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    Fs extends DeepMergeFunctionsURIs,\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    M,\n  > {\n    readonly FilterUndefined: FilterOut<Ts, null | undefined>;\n  }\n}\n\nconst _merge = deepmergeCustom<\n  unknown,\n  {\n    DeepMergeArraysURI: 'DeepMergeLeafURI';\n    DeepMergeFilterValuesURI: 'FilterUndefined';\n  }\n>({\n  mergeArrays: false,\n});\n\n/**\n * A custom implement of `deepmerge-ts` ({@linkcode deepmergeCustom}) for better suitability with this library.\n * @param value The value to merge into.\n * @param mergers The values to merge with the original value\n * @returns The merged value, which is a new object containing the properties of the original value and the mergers.\n *\n * @see {@linkcode equal} for deep equality check\n * @see {@linkcode types} for partial type definition\n * @see {@linkcode NoInfer} for type inference utility\n * @see {@linkcode castings} for casting utilities\n */\nexport const merge = <T = any>(\n  value: T,\n  ...mergers: (types.DeepPartial<NoInfer<T>> | NoInfer<T> | undefined)[]\n): T => {\n  // #region Check performance\n  const check1 = mergers.every(merger => equal(merger, value));\n  if (check1) return value;\n  // #endregion\n\n  return castings.commons.any(_merge(value, ...mergers));\n};\n"],"names":[],"mappings":";;;;AAgBA,MAAM,MAAM,GAAG,eAAe,CAM5B;AACA,IAAA,WAAW,EAAE,KAAK;AACnB,CAAA,CAAC;AAEF;;;;;;;;;;AAUG;AACI,MAAM,KAAK,GAAG,CACnB,KAAQ,EACR,GAAG,OAAmE,KACjE;;AAEL,IAAA,MAAM,MAAM,GAAG,OAAO,CAAC,KAAK,CAAC,MAAM,IAAI,KAAK,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC;AAC5D,IAAA,IAAI,MAAM;AAAE,QAAA,OAAO,KAAK;;AAGxB,IAAA,OAAO,QAAQ,CAAC,OAAO,CAAC,GAAG,CAAC,MAAM,CAAC,KAAK,EAAE,GAAG,OAAO,CAAC,CAAC;AACxD;;;;"}