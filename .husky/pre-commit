# RÃ©cupÃ¨re le message de commit
commit_msg=$(cat .git/COMMIT_EDITMSG 2>/dev/null | tr '\n' ' ' || echo "")

echo "VÃ©rification du message de commit : $commit_msg"

# VÃ©rifie si le message contient "-NO-TEST" (mÃªme sur plusieurs lignes)
if echo "$commit_msg" | grep -q "\-NO\-TEST"; then
  echo "ğŸš« Tests ignorÃ©s : -NO-TEST dÃ©tectÃ© dans le message de commit"
  git add .
  exit 0
fi

npm run ci
git add .
echo "âœ… Tests rÃ©ussis, commit autorisÃ©"
exit 0
